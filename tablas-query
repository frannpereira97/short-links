-- Crear la tabla de usuarios
CREATE TABLE users (
    id_user SERIAL PRIMARY KEY,
    user_name VARCHAR(255) NOT NULL,
    password VARCHAR(255) NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    rate_limit INT,
    rate_limit_reset TIMESTAMP,
    permisos VARCHAR(255)
);

-- Crear la tabla de datos personales
CREATE TABLE datos_personales (
    id_user INT PRIMARY KEY REFERENCES users(id_user),
    nombre VARCHAR(255),
    apellido VARCHAR(255),
    sexo CHAR(1),
    fecha_nacimiento DATE,
    nacionalidad VARCHAR(255),
    provincia VARCHAR(255),
    ciudad VARCHAR(255),
    domicilio VARCHAR(255)
);

-- Crear la tabla de URLs acortadas
CREATE TABLE short (
    id_short SERIAL PRIMARY KEY,
    pagina TEXT NOT NULL,
    short VARCHAR(255) UNIQUE NOT NULL,
    expiry TIMESTAMP,
    fecha_creacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    abierto BOOLEAN,
    id_user INT REFERENCES users(id_user)
);